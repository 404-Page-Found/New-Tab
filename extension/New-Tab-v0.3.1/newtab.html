<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- Add CSP policy -->
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; img-src 'self' data:; style-src 'self' 'unsafe-inline'; script-src 'self';">
  <title>New-Tab</title>
  <style>
  /* Keep original CSS styles */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
        sans-serif;
    }

    body {
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      min-height: 100vh;
      padding: 20px;
    }
    body[data-bg="default"] {
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
    }
    body[data-bg^="img"] {
      background: none;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
    }

    .search-bar {
      align-items: center;
      background: rgba(255, 255, 255, 0.9);
      display: flex;
      padding: 10px 20px;
      border-radius: 25px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      margin-bottom: 20px;
      width: 750px;
      margin-left: auto;
      margin-right: auto;
      transition: transform 0.18s cubic-bezier(0.4, 1.4, 0.6, 1);
    }
    .search-bar:focus-within {
      transform: scale(1.04);
      box-shadow: 0 6px 24px rgba(33, 150, 243, 0.13);
    }
    .search-bar input {
      width: 100%;
      padding: 6px;
      border: none;
      background: transparent;
      font-size: 20px;
      outline: none;
      flex: 1;
    }
    .search-engine {
      -webkit-appearance: none;
      appearance: none;
      background: url('data:image/svg+xml;utf8,<svg fill="%23999" height="18" viewBox="0 0 24 24" width="18" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"/><path d="M0 0h24v24H0z" fill="none"/></svg>')
        no-repeat right 8px center;
      padding: 6px 30px 6px 10px;
      border-radius: 4px;
      margin-right: 10px;
      min-width: 80px;
      border-color: #b7b7b7;
    }

    .app-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
      gap: 20px;
      padding: 20px;
    }

    .app-icon {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-decoration: none;
      color: #333;
      transition: transform 0.2s;
      position: relative;
    }

    .app-icon:hover {
      transform: scale(1.05);
    }

    .icon {
      width: 60px;
      height: 60px;
      background: white;
      border-radius: 15px;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      margin-bottom: 8px;
    }

    .icon img {
      width: 35px;
      height: 35px;
    }

    .app-name {
      font-size: 12px;
      text-align: center;
      color: #fff;
      text-shadow: 0 0 2px #000, 0 0 2px #000, 0 0 2px #000, 0 0 2px #000;
    }

    .clock {
      text-align: center;
      font-size: 5em;
      color: #5e5e5e;
      margin-bottom: 20px;
      font-weight: 300;
    }

    .date {
      text-align: center;
      color: #ffffff;
      margin-bottom: 30px;
      font-size: 1.5em;
    }

  /* Other styles remain unchanged... */
  </style>
</head>
<body>
  <div class="container">
    <div id="clock" class="clock">12:00</div>
    <div id="date" class="date">Monday, June 20</div>

    <div class="search-bar">
      <select class="search-engine">
        <input type="text" placeholder="Search or enter website" />
      </select>
    </div>

    <div class="app-grid">
      <a href="https://www.google.com" class="app-icon" target="_blank" rel="noopener noreferrer">
        <div class="icon">
          <img src="images/google.png" alt="Google" />
        </div>
        <span class="app-name">Google</span>
      </a>
      <a href="https://www.youtube.com" class="app-icon" target="_blank" rel="noopener noreferrer">
        <div class="icon">
          <img src="images/youtube.svg" alt="YouTube" />
        </div>
        <span class="app-name">YouTube</span>
      </a>
      <a href="https://www.github.com" class="app-icon" target="_blank" rel="noopener noreferrer">
        <div class="icon">
          <img src="images/github.png" alt="GitHub" />
        </div>
        <span class="app-name">GitHub</span>
      </a>
      <a href="https://www.gmail.com" class="app-icon" target="_blank" rel="noopener noreferrer">
        <div class="icon">
          <img src="images/gmail.ico" alt="Gmail" />
        </div>
        <span class="app-name">Gmail</span>
      </a>
      <a href="https://www.twitter.com" class="app-icon" target="_blank" rel="noopener noreferrer">
        <div class="icon">
          <img src="images/twitter.svg" alt="X" />
        </div>
        <span class="app-name">Twitter</span>
      </a>
      <a href="https://www.facebook.com" class="app-icon" target="_blank" rel="noopener noreferrer">
        <div class="icon">
          <img src="images/facebook.ico" alt="Facebook" />
        </div>
        <span class="app-name">Facebook</span>
      </a>
      <a href="#" class="app-icon" id="settings-app">
        <div class="icon">
          <img src="images/settings.png" alt="Settings" />
        </div>
        <span class="app-name">Settings</span>
      </a>
      <a href="#" class="app-icon" id="add-app">
        <div class="icon">
          <img src="images/add.png" alt="Add" style="width: 32px; height: 32px" />
        </div>
        <span class="app-name">Add</span>
      </a>
    </div>
  </div>

  <!-- Settings modal -->
  <div id="settings-modal" style="display: none;">
    <div>
      <div class="settings-body" style="display: flex; min-height: 400px">
        <nav class="settings-menu">
          <button class="settings-menu-item selected" data-section="general">General</button>
          <button class="settings-menu-item" data-section="background">Background</button>
          <button class="settings-menu-item" data-section="apps">Apps</button>
          <button class="settings-menu-item" data-section="clock">Clock</button>
          <button class="settings-menu-item" data-section="date">Date</button>
        </nav>
        <div class="settings-content">
          <section class="settings-section" data-section="general">
            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
              <input type="checkbox" id="open-new-tab-setting" style="cursor: pointer" />
              Open apps in a new tab
            </label>
          </section>
          <section class="settings-section" data-section="background" style="display: none">
            <div class="bg-thumbnails" id="bg-thumbnails">
              <img class="bg-thumb" data-bg="default" src="data:image/svg+xml;utf8,<svg width='48' height='48' xmlns='http://www.w3.org/2000/svg'><defs><linearGradient id='g' x1='0' y1='0' x2='1' y2='1'><stop stop-color='%23f5f7fa' offset='0'/><stop stop-color='%23c3cfe2' offset='1'/></linearGradient></defs><rect width='48' height='48' rx='8' fill='url(%23g)'/></svg>" title="Default" alt="Default" />
              <img class="bg-thumb" data-bg="img1" src="images/bg1.jpg" title="Beach - Australia" alt="Beach - Australia" />
              <img class="bg-thumb" data-bg="img2" src="images/bg2.jpg" title="City - Shanghai" alt="City - Shanghai" />
              <img class="bg-thumb" data-bg="img3" src="images/bg3.jpg" title="Dubai - United Arab Emirates" alt="Dubai - United Arab Emirates" />
              <img class="bg-thumb" data-bg="img4" src="images/bg4.jpg" title="Night Sky - Mountain Peak" alt="Night Sky - Mountain Peak" />
              <img class="bg-thumb" data-bg="img5" src="images/bg5.jpg" title="Night Sky - Tree" alt="Night Sky - Tree" />
              <img class="bg-thumb" data-bg="img6" src="images/bg6.jpg" title="Huangshan - Anhui" alt="Huangshan - Anhui" />
              <img class="bg-thumb" data-bg="img7" src="images/bg7.jpg" title="Skyline At Night - Hong Kong" alt="Skyline At Night - Hong Kong" />
              <img class="bg-thumb" data-bg="img8" src="images/bg8.jpg" title="Slovenia" alt="Slovenia" />
            </div>
          </section>
          <!-- Other settings remain unchanged -->
        </div>
      </div>
    </div>
  </div>

  <!-- Add app modal -->
  <div id="add-app-modal" style="display: none;">
    <div>
      <h3 style="margin-bottom: 12px">Add New App</h3>
      <input id="add-app-url" type="text" placeholder="Enter website URL" style="width: 100%; padding: 8px; margin-bottom: 12px" />
      <div id="default-apps-list" style="margin-bottom: 12px"></div>
      <div style="text-align: right">
        <button id="add-app-cancel" style="margin-right: 8px">Cancel</button>
        <button id="add-app-confirm">Add</button>
      </div>
    </div>
  </div>

  <script>
  // Update background image application function
    function applyBg() {
      const bg = localStorage.getItem("homepageBg") || "default";
      document.body.setAttribute("data-bg", bg);
      
  // Update thumbnail selection status
      document.querySelectorAll(".bg-thumb").forEach((thumb) => {
        thumb.classList.toggle("selected", thumb.getAttribute("data-bg") === bg);
      });
      
      if (bg !== "default") {
  // Use local image path
        const bgImages = {
          img1: "images/bg1.jpg",
          img2: "images/bg2.jpg",
          img3: "images/bg3.jpg",
          img4: "images/bg4.jpg",
          img5: "images/bg5.jpg",
          img6: "images/bg6.jpg",
          img7: "images/bg7.jpg",
          img8: "images/bg8.jpg"
        };
        
        if (bgImages[bg]) {
          document.body.style.background = `url('${bgImages[bg]}') center center/cover no-repeat fixed`;
        }
      } else {
        document.body.style.background = "";
      }
    }

  // Other JS functions remain unchanged
    // ...
  </script>
</body>
</html>
